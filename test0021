package com.company;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.impl.client.HttpClientBuilder;
import org.apache.http.util.EntityUtils;

import java.io.IOException;
import java.net.URI;

public class WebServiceCalls {
    private HttpClient client = null;

    public WebServiceCalls() {
        this.init();
    }

    void init()
    {
        this.client =  HttpClientBuilder.create().build();
    }
    String get(URI uri)
    {
        String responseStr = null;
        HttpGet request = new HttpGet(uri);
        try
        {
            HttpResponse response = client.execute(request);
            int status = response.getStatusLine().getStatusCode();
            if (status >= 200 && status < 300)
            {
                HttpEntity entity = response.getEntity();
                if(entity == null) {
                    return  "";
                } else {
                    responseStr=  EntityUtils.toString(entity);
                }
            }
            else
            {
                System.out.println("Error occured during executing request for: "+uri+".Error status code:"+status);
                return null;
            }
        }
        catch (IOException e)
        {
            e.printStackTrace();
        }
        return responseStr;

    }

}
